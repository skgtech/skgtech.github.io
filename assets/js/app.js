!function t(e,n,a){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,a)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(t,e,n){var a=t("./frontpage"),r=t("./slack-invite");t("./newsletter");var i=new a;i.init();var o=new r;o.init({email_container:".slack-subscribe-email",cta:".slack-subscribe-button"})},{"./frontpage":2,"./newsletter":3,"./slack-invite":4}],2:[function(t,e,n){var a=t("calendarth"),r=t("./util"),i=e.exports=function(){this.$agendaContainer=null,this.$agendaItem=null,this.$error=null};i.MAX_EVENTS_SHOW=8,i.prototype.init=function(){this.$agendaContainer=$("#agenda-items"),this.$agendaItem=$("#agenda-tpl"),this.$error=$("#agenda-error"),this.calendarth=a({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this))},i.prototype._handleCalResult=function(t,e){if(this.$agendaContainer.empty(),t)return void this.$agendaContainer.append(this.$error.clone().removeClass("hide"));var n=[],a=0,r=0,o="";e.items.forEach(function(t){a>=i.MAX_EVENTS_SHOW||n.indexOf(t.summary)>-1||(n.push(t.summary),o+=this._assignValues(this.$agendaItem.clone(),t,r),a++,r++,r>2&&(r=0))},this),o+="",this.$agendaContainer.append(o)},i.prototype._assignValues=function(t,e,n){t.removeClass("hide"),t.find("article.calendar-entry").addClass("calendar-entry-"+n),t.find(".title").addClass("title-"+n),t.find(".title").text(e.summary);var a=this._parseDesc(e.description);t.find(".date").text(r.getDate(e.start)),t.find(".time").text(r.getTime(e.start));var i=null,o="";return i=a.venue?a.venue:e.location,i.length>12&&(i=i.substr(0,9)+"..."),a.mapUrl?(o='<a href="'+a.mapUrl+'" target="_blank">',o+=i,o+="</a>"):o=i,t.find(".location-name").html(o),a.infoUrl?t.find(".more-info").attr("href",a.infoUrl):t.find(".more-info").addClass("hide"),a.about?t.find(".details p").html(a.about):t.find(".details").addClass("hide"),t.html()},i.prototype._parseDesc=function(t){var e={venue:null,infoUrl:null,mapUrl:null,about:null,language:null,rest:""};if(!t)return e;var n=t.split("\n");return n.forEach(function(t){if(t.length){var n=t.indexOf(":");if(-1!==n){var a=t.substr(0,n).toLowerCase().trim(),r=t.substr(n+1).trim();switch(a){case"venue":e.venue=r;break;case"info":e.infoUrl=r;break;case"map":e.mapUrl=r;break;case"about":e.about=r;break;case"language":e.language=r;break;default:e.rest+=t+"<br />"}}}},this),e}},{"./util":5,calendarth:7}],3:[function(t,e,n){"use strict";!function(){var t={};t.mceInit=function(){var e={url:"https://datablaster.us2.list-manage.com/subscribe/post-json?u=249dbe460c3c1857a489dde05&amp;id=b926e92856&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"};$("#mc-embedded-subscribe-form").submit(function(n){$(".response").hide(),n.preventDefault();var a=this.EMAIL.value;return e.data=$(this).serialize(),e.success=function(e){t.mceSuccess(e,a)},$(this).find("button").button("loading"),$.ajax(e),!1})},t.mceSuccess=function(t){if("success"===t.result)return void $(".newsletter").find("button").button("complete");var e,n=-1;try{var a=t.msg.split(" - ",2);if(void 0===a[1])e=t.msg;else{var r=parseInt(a[0],10);r.toString()===a[0]?(n=a[0],e=a[1]):(n=-1,e=t.msg)}}catch(i){n=-1,e=t.msg}$(".newsletter .field").addClass("has-error"),$(".newsletter").find("button").button("reset"),$(".js-error").show(),$(".js-error").html(e)},t.mceInit()}()},{}],4:[function(t,e,n){var a=e.exports=function(){};a.TOKEN="xoxp-3330967421-3332061266-7344001762-99c6a8",a.SUBSCRIBE_URL="https://skgtech.slack.com/api/users.admin.invite",a.prototype.init=function(t){if(!t.email_container)throw"Must set an input element selector";if(!t.cta)throw"Must set a Call to Action element selector";this.$emailEl=$(t.email_container),this.$ctaEl=$(t.cta),this.attachEvents()},a.prototype.attachEvents=function(){var t=this;this.$ctaEl.on("click",function(e){e.preventDefault();var n=t.$emailEl.val();t.$ctaEl.button("loading"),t.subscribe(n,function(e){e?("empty-email"===e?$(".slack-form .field").addClass("has-error"):"wrong-email"===e&&$(".slack-form .field").addClass("has-error"),t.$ctaEl.button("reset")):t.$ctaEl.button("complete")})})},a.prototype.subscribe=function(t,e){return t&&t.length?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)?void $.ajax({method:"POST",url:a.SUBSCRIBE_URL,data:{email:t,token:a.TOKEN,set_active:!0}}).success(function(t){t.error?("already_in_team"===t.error&&e("already_in_team"),"already_invited"===t.error&&e("already_invited")):e(null)}).error(function(t){e("err")}):(e("wrong-email"),!1):(e("empty-email"),!1)}},{}],5:[function(t,e,n){var a=e.exports={},r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.nl2br=function(t){return"string"!=typeof t?"":t.split("\n").join("<br />")},a.formatDate=function(t,e){var n,o,s=!1;t.dateTime?(n=new Date(t.dateTime),o=new Date(e.dateTime)):(s=!0,n=new Date(t.date),o=new Date(e.date),o-=11e6,o=new Date(o));var l=r[n.getDay()];return l+=", "+i[n.getMonth()],l+=" "+n.getDate(),s?l+=n.getDate()===o.getDate()&&n.getMonth()===o.getMonth()?", All day event":" - "+r[o.getDay()]+" "+o.getDate():(l+=" | "+n.getHours()+":"+a.twoDigit(n.getMinutes()),l+=" - "+o.getHours()+":"+a.twoDigit(o.getMinutes())),l},a.getDate=function(t){var e,n=!1;t.dateTime?e=new Date(t.dateTime):(n=!0,e=new Date(t.date));var a="";return a+=e.getDate(),a+=" "+i[e.getMonth()]},a.getTime=function(t){var e,n=!1;t.dateTime?e=new Date(t.dateTime):(n=!0,e=new Date(t.date));var r="";return n?"All Day":(r+=e.getHours(),void(r+=":"+a.twoDigit(e.getMinutes())))},a.twoDigit=function(t){var e=t+"";return 1===e.length?"0"+e:e}},{}],6:[function(t,e,n){var a=t("./item"),r=e.exports=function(t){this.options=t||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};r.prototype.fetch=function(t){var e="https://www.googleapis.com/calendar/v3/calendars/";e+=this.calendarId+"/events?key=",e+=this.apiKey;var n=new Date;e+="&orderBy=startTime",e+="&singleEvents=true",e+="&timeMin="+n.toISOString(),e+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:e,crossDomain:!0,dataType:"json"}).done(function(e){var n=new a(e);t(null,n)}).fail(function(e,n,a){t(a)})},r.prototype.getEventUrl=function(t){var e=t.htmlLink.split("="),n="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return n+=e[1],n+="&tmsrc=",n+=encodeURIComponent(t.organizer.email)}},{"./item":8}],7:[function(t,e,n){var a=t("./calendarth");e.exports=function(t){return new a(t)}},{"./calendarth":6}],8:[function(t,e,n){var a=e.exports=function(t){return t};a.prototype.get=function(t){return t?this.calendarObj[t]:this.calendarObj}},{}]},{},[1]);
//# sourceMappingURL=app.js.map
