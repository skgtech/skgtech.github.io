!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b=a("./frontpage"),c=new b;c.init()},{"./frontpage":2}],2:[function(a,b){var c=a("calendarth"),d=a("./util"),e=b.exports=function(){this.$agendaContainer=null,this.$agendaItem=null,this.$error=null};e.prototype.init=function(){this.$agendaContainer=$("#agenda-items"),this.$agendaItem=$("#agenda-tpl"),this.$error=$("#agenda-error"),this.calendarth=c({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:6}),this.calendarth.fetch(this._handleCalResult.bind(this))},e.prototype._handleCalResult=function(a,b){if(this.$agendaContainer.empty(),a)return void this.$agendaContainer.append(this.$error.clone().removeClass("hide"));var c='<div class="row">';b.items.forEach(function(a,b){b&&b%2===0&&(c+='</div><div class="row">'),c+=this._assignValues(this.$agendaItem.clone(),a)},this),c+="</div>",this.$agendaContainer.append(c)},e.prototype._assignValues=function(a,b){a.removeClass("hide"),a.find(".panel-title").text(b.summary);var c=this._parseDesc(b.description);a.find(".agenda-tpl-when span").text(d.formatDate(b.start,b.end));var e="";if(c.mapUrl?(e='<a href="'+c.mapUrl+'" target="_blank">',e+=b.location,e+="</a>"):e=b.location,a.find(".agenda-tpl-address span").html(e),c.venue?a.find(".agenda-tpl-venue span").text(c.venue):a.find(".agenda-tpl-venue").addClass("hide"),c.infoUrl){var f="";f=c.infoUrl.length>25?c.infoUrl.substr(0,25)+"...":c.infoUrl,a.find(".agenda-tpl-info a").attr("href",c.infoUrl).text(f)}else a.find(".agenda-tpl-info").addClass("hide");var g=this.calendarth.getEventUrl(b);return a.find(".addcal").attr("href",g),a.find(".viewcal").attr("href",b.htmlLink),a.html()},e.prototype._parseDesc=function(a){var b={venue:null,infoUrl:null,mapUrl:null,rest:""};if(!a)return b;var c=a.split("\n");return c.forEach(function(a){if(a.length){var c=a.indexOf(":");if(-1!==c){var d=a.substr(0,c).toLowerCase().trim(),e=a.substr(c+1).trim();switch(d){case"venue":b.venue=e;break;case"info":b.infoUrl=e;break;case"map":b.mapUrl=e;break;default:b.rest+=a+"<br />"}}}},this),b}},{"./util":3,calendarth:5}],3:[function(a,b){var c=b.exports={};c.nl2br=function(a){return"string"!=typeof a?"":a.split("\n").join("<br />")},c.formatDate=function(a,b){var c,d,e=!1;a.dateTime?(c=new Date(a.dateTime),d=new Date(b.dateTime)):(e=!0,c=new Date(a.date),d=new Date(b.date),d-=11e6,d=new Date(d));var f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=f[c.getDay()];return h+=", "+g[c.getMonth()],h+=" "+c.getDate(),e?h+=" - "+f[d.getDay()]+" "+d.getDate():(h+=" | "+c.getHours()+":"+c.getMinutes(),h+=" - "+d.getHours()+":"+d.getMinutes()),h}},{}],4:[function(a,b){var c=a("./item"),d=b.exports=function(a){this.options=a||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};d.prototype.fetch=function(a){var b="https://www.googleapis.com/calendar/v3/calendars/";b+=this.calendarId+"/events?key=",b+=this.apiKey;var d=new Date;b+="&orderBy=startTime",b+="&singleEvents=true",b+="&timeMin="+d.toISOString(),b+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:b,crossDomain:!0,dataType:"json"}).done(function(b){var d=new c(b);a(null,d)}).fail(function(b,c,d){a(d)})},d.prototype.getEventUrl=function(a){var b=a.htmlLink.split("="),c="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return c+=b[1],c+="&tmsrc=",c+=encodeURIComponent(a.organizer.email)}},{"./item":6}],5:[function(a,b){var c=a("./calendarth");b.exports=function(a){return new c(a)}},{"./calendarth":4}],6:[function(a,b){var c=b.exports=function(a){return a};c.prototype.get=function(a){return a?this.calendarObj[a]:this.calendarObj}},{}]},{},[1]);